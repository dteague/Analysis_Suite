
<!DOCTYPE html>

<html lang="en">
<head>
<meta content="ie=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta charset="utf-8"/>
<meta content="Docutils 0.17.1: http://docutils.sourceforge.net/" name="generator"/>
<title>
      Basic running | Analysis Suite  documentation
    </title>
<link href="_static/pygments.css" rel="stylesheet"/>
<link href="_static/theme.css" rel="stylesheet"/>
<link href="_static/pygments.css" rel="stylesheet"/>
<link href="_static/theme.css" rel="stylesheet"/>
<link href="_static/style.css" rel="stylesheet"/>
<link href="search.html" rel="search" title="Search"/>
<link href="genindex.html" rel="index" title="Index"/>
<link href="analysis_suite.html" rel="next" title="Analysis Suite Documentation"/>
<link href="index.html" rel="prev" title="Main Page"/>
</head><body class="text-gray-900 antialiased">
<div class="h-screen md:grid md:grid-layout" id="page">
<a class="block text-xl bg-white px-8 py-4 z-20 absolute top-0 inset-x-0 text-center transform -translate-y-full focus:translate-y-0 focus:outline-none transition-transform duration-75" href="#basic-running" title="Skip navigation links">Skip to content</a>
<header class="grid-area-header z-10">
<div class="bg-gray-900 shadow-md flex justify-between items-center z-10">
<a aria-label="Back to homepage" class="hover:bg-gray-700 focus:bg-gray-700 tooltipped tooltipped-se" href="index.html">
<h2 class="text-xl text-gray-100 mx-5 py-4">Analysis Suite  documentation</h2>
</a>
<form action="search.html" class="hidden md:flex my-auto mx-5 justify-between items-center print:hidden" id="searchbox" method="get">
<input aria-label="Search the docs" class="p-2 flex-1 focus:bg-yellow-50 rounded-none" id="search-input" name="q" placeholder="Search the docs" style="width: 300px;" type="search"/>
<button aria-label="Get search results" class="p-2 text-white bg-gray-700 hover:bg-gray-200 hover:text-pink-500 focus:bg-gray-200 focus:text-pink-500 tooltipped tooltipped-sw">
<svg aria-hidden="true" class="fill-current stroke-current h-6 w-6" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg>
</button>
</form>
</div>
</header><aside class="grid-area-sidebar h-full fixed md:relative inset-y-0 left-0 z-20 md:z-0 print:hidden overflow-y-auto transition-all transform transform-gpu -translate-x-full opacity-0 duration-300 md:translate-x-0 md:opacity-100" id="sidebar">
<nav class="h-full overflow-y-auto bg-white text-gray-700 border-r pt-16 flex flex-col" role="navigation">
<div class="nav-toc flex-1 px-5"><p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><div class="nav-link"><a class="reference internal" href="index.html">Main Page</a></div></li>
<li class="toctree-l1 current expanded"><div class="nav-link"><svg aria-hidden="true" class="expand" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a class="current reference internal" href="#">Basic running</a></div><ul>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" href="#analysis-analyze">Analysis (<code class="docutils literal notranslate">analyze</code>)</a></div></li>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" href="#bdt-runner-mva">BDT runner (<code class="docutils literal notranslate">mva</code>)</a></div></li>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" href="#plotting-plot">Plotting (<code class="docutils literal notranslate">plot</code>)</a></div></li>
<li class="toctree-l2"><div class="nav-link"><a class="reference internal" href="#setup-combine-combine">Setup Combine (<code class="docutils literal notranslate">combine</code>)</a></div></li>
</ul>
</li>
<li class="toctree-l1"><div class="nav-link"><svg aria-hidden="true" class="expand" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a class="reference internal" href="analysis_suite.html">Analysis Suite Documentation</a></div><ul>
<li class="toctree-l2"><div class="nav-link"><svg aria-hidden="true" class="expand" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a class="reference internal" href="analysis_suite.commons.html"><code class="docutils literal notranslate">commons</code></a></div><ul>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" href="analysis_suite.commons.html#commons-awkward-commons"><code class="docutils literal notranslate">commons.awkward_commons</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" href="analysis_suite.commons.html#module-analysis_suite.commons.configs"><code class="docutils literal notranslate">commons.configs</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" href="analysis_suite.commons.html#commons-histogram"><code class="docutils literal notranslate">commons.histogram</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" href="analysis_suite.commons.html#module-analysis_suite.commons.info"><code class="docutils literal notranslate">commons.info</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" href="analysis_suite.commons.html#module-analysis_suite.commons.makeSimpleHtml"><code class="docutils literal notranslate">commons.makeSimpleHtml</code></a></div></li>
</ul>
</li>
<li class="toctree-l2"><div class="nav-link"><svg aria-hidden="true" class="expand" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a class="reference internal" href="analysis_suite.BDT_utilities.html"><code class="docutils literal notranslate">BDT_utilities</code></a></div><ul>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" href="analysis_suite.BDT_utilities.html#bdt-utilities-mvaplotter"><code class="docutils literal notranslate">BDT_utilities.MVAPlotter</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" href="analysis_suite.BDT_utilities.html#bdt-utilities-mvamaker"><code class="docutils literal notranslate">BDT_utilities.MvaMaker</code></a></div></li>
</ul>
</li>
<li class="toctree-l2"><div class="nav-link"><svg aria-hidden="true" class="expand" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a class="reference internal" href="analysis_suite.Plotting.html"><code class="docutils literal notranslate">Plotting</code></a></div><ul>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" href="analysis_suite.Plotting.html#plotting-logfile"><code class="docutils literal notranslate">Plotting.LogFile</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" href="analysis_suite.Plotting.html#module-analysis_suite.Plotting.configHelper"><code class="docutils literal notranslate">Plotting.configHelper</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" href="analysis_suite.Plotting.html#plotting-pypad"><code class="docutils literal notranslate">Plotting.pyPad</code></a></div></li>
<li class="toctree-l3"><div class="nav-link"><a class="reference internal" href="analysis_suite.Plotting.html#plotting-stack"><code class="docutils literal notranslate">Plotting.stack</code></a></div></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<button aria-label="Close menu" class="text-4xl text-gray-800 p-4 bottom-0 hover:text-pink-500 md:hidden focus:text-pink-500 self-center" id="closeSidebar" title="Close menu">
<svg aria-hidden="true" class="fill-current stroke-current h-6 w-6" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</aside>
<main class="px-5 lg:ml-fluid grid-area-main overflow-y-auto flex flex-col h-full"><nav aria-label="breadcrumbs" class="mt-16 mb-12 text-sm text-gray-700 leading-tight print:hidden" role="navigation">
<a class="text-blue-700" href="index.html">Analysis Suite  documentation</a>
<span class="text-gray-700 mr-1">/</span><span aria-current="page">Basic running</span>
</nav>
<article class="flex-1" role="main">
<section id="basic-running">
<h1>Basic running<a aria-label="Copy link to section: Basic running." class="headerlink tooltipped tooltipped-ne" href="#basic-running" role="button"><svg pointer-events="none" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h1>
<p>The code works by a single script, <code class="docutils literal notranslate">run_suite.py</code> which acts as the hub for the running of the code. There are several different modes the code can be run in, but within each mode, there are common options that are used, so most commands will look very similar except for minor differences.</p>
<p>Options that are always required is the analysis name and the working directory. The Analysis name is coded to many input files and configs specific to the analysis one is doing and the working directory is teh common place where output files are saved.</p>
<p>Below, each mode is describe in more depth. An important note is the output of each step flows into the other. One needs the output from <code class="docutils literal notranslate">analyze</code> to run <code class="docutils literal notranslate">mva</code> and one needs the output of <code class="docutils literal notranslate">mva</code> to run <code class="docutils literal notranslate">plotting</code></p>
<section id="analysis-analyze">
<h2>Analysis (<code class="docutils literal notranslate">analyze</code>)<a aria-label="Copy link to section: Analysis (analyze)." class="headerlink tooltipped tooltipped-ne" href="#analysis-analyze" role="button"><svg pointer-events="none" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<div class="admonition note" id="analysis-analyze-note-1">
<p class="admonition-title">Note<a aria-label="Copy link to this note." class="headerlink tooltipped tooltipped-ne" href="#analysis-analyze-note-1" role="button"><svg pointer-events="none" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></p>
<p>This is part of the code is a work in progress</p>
</div>
<p>Analyze runs the analysis code on the skimmed NanoAOD samples. This code works using <code class="docutils literal notranslate">farmoutAnalysisJobs</code> which is a wisconsin specific script, so this is something that MUST be run on the <code class="docutils literal notranslate">login.hep.wisc.edu</code> machines. Other steps can be run from any cmssw area.</p>
<p>Farmout works by either sending jobs based on a list of files or a directory in the hdfs area and a run file. Because of this, the analysis suite needs no python processing to setup the job like the rest of the suite, and thus the code is only the c++ files full of the TSelector. The actual run file is the <code class="docutils literal notranslate">analyze.py</code> file.</p>
<p>One thing extremely important for processing using this framework: because very little can be sent as info to these jobs, the directories of the input files expresses information about the job. So in the eos area, the directory you run over MUST be in the format: <code class="docutils literal notranslate">&lt;Analysis&gt;_&lt;Year&gt;_&lt;Optional Name&gt;</code> with the optional name as a way to identify info about the skim used or other info. The output files will be in a directory called <code class="docutils literal notranslate">&lt;Analysis&gt;_&lt;Year&gt;_&lt;Optional Name&gt;-analyze</code>.</p>
</section>
<section id="bdt-runner-mva">
<h2>BDT runner (<code class="docutils literal notranslate">mva</code>)<a aria-label="Copy link to section: BDT runner (mva)." class="headerlink tooltipped tooltipped-ne" href="#bdt-runner-mva" role="button"><svg pointer-events="none" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>Mva (probably misnamed) runs the code for training the BDT for samples. This portion of the code takes the newly made ntuples from the output of the <code class="docutils literal notranslate">analyze</code> step and takes care of the rest of the processing, calculating any ancillary variables i.e. variables not directly used in the event selection such as centrality. The variables included in the training are kept in <code class="docutils literal notranslate">inputs.py</code> and the functions that are used to create the variables are stored in <code class="docutils literal notranslate">commons/python/awkward_commons.py</code>.</p>
<p>The code has the ability to run in a binary mode and a multiclass mode which is also decided in the <code class="docutils literal notranslate">inputs.py</code> file. NOTE: currently, the code does not store info about the <code class="docutils literal notranslate">inputs.py</code> file, so it is possible to change the mode of the file after running and causing unexpected behavior. Hopefully a fix will come soon.</p>
<p>Mva also takes care of the weighting that is used for the plotting (and is one reason why it is needed to be done before the plotting).</p>
</section>
<section id="plotting-plot">
<h2>Plotting (<code class="docutils literal notranslate">plot</code>)<a aria-label="Copy link to section: Plotting (plot)." class="headerlink tooltipped tooltipped-ne" href="#plotting-plot" role="button"><svg pointer-events="none" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>Plotting</p>
</section>
<section id="setup-combine-combine">
<h2>Setup Combine (<code class="docutils literal notranslate">combine</code>)<a aria-label="Copy link to section: Setup Combine (combine)." class="headerlink tooltipped tooltipped-ne" href="#setup-combine-combine" role="button"><svg pointer-events="none" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<div class="admonition note" id="setup-combine-combine-note-2">
<p class="admonition-title">Note<a aria-label="Copy link to this note." class="headerlink tooltipped tooltipped-ne" href="#setup-combine-combine-note-2" role="button"><svg pointer-events="none" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></p>
<p>This is part of the code is a work in progress</p>
</div>
</section>
</section>
</article>
<footer>
<div class="mt-20 mb-4 text-sm text-gray-700">© 2021, Dylan Teague Made with <a href="https://www.sphinx-doc.org">Sphinx 4.0.2</a></div>
</footer>
</main>
<div class="sticky bottom-0 md:hidden print:hidden bg-white">
<div class="flex justify-center items-center">
<button aria-labelledby="menuLabel" class="text-3xl p-4 flex items-center focus:bg-gray-200" id="openSidebar">
<svg aria-hidden="true" class="fill-current h-8 w-8" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg>
<span class="pl-2 text-sm font-medium uppercase tracking-wide text-gray-700" id="menuLabel">Menu</span>
</button><button aria-labelledby="searchLabel" class="text-3xl p-4 flex items-center focus:bg-gray-200" id="openSearch">
<svg aria-hidden="true" class="fill-current h-8 w-8" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg>
<span class="pl-2 text-sm font-medium uppercase tracking-wide text-gray-700" id="searchLabel">Search</span>
</button>
</div>
</div>
<div class="w-full fixed bottom-0 left-0 z-10 bg-gray-900 overflow-x-hidden pt-10 flex flex-col items-center md:hidden transition-all opacity-0 transform transform-gpu translate-y-full duration-300" id="search-pane">
<h4 class="text-xl text-white mb-4" id="search-label">Enter search term</h4><form action="search.html" class="flex w-full justify-between items-center max-w-sm px-12" id="searchbox" method="get">
<input aria-labelledby="search-label" class="p-2 flex-1 rounded-none" name="q" placeholder="Search the docs" type="search"/>
<button aria-label="Get search results" class="p-2 text-white bg-gray-700 hover:bg-gray-200 hover:text-pink-500 focus:bg-gray-200 focus:text-pink-500 tooltipped tooltipped-sw">
<svg aria-hidden="true" class="fill-current stroke-current h-6 w-6" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg>
</button>
</form>
<button aria-label="Close menu" class="text-4xl text-gray-200 p-4 bottom-0 hover:text-pink-500 md:hidden focus:text-pink-500 self-center" id="closeSearch" title="Close menu">
<svg aria-hidden="true" class="fill-current stroke-current h-6 w-6" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</div>
<button class="fixed bottom-0 right-0 opacity-0 p-4 m-4 tracking-wide bg-gray-900 text-gray-100 transition transform transform-gpu duration-500 translate-y-full" id="snackbar">
  Clear highlights
</button><div class="fixed hidden inset-0 bg-black bg-opacity-50" id="screen"></div>
</div>
<script data-url_root="./" id="documentation_options" src="_static/documentation_options.js">
</script>
<script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
<script src="_static/jquery.js"></script>
<script src="_static/underscore.js"></script>
<script src="_static/doctools.js"></script>
<script defer="" src="_static/theme.js"></script>
</body>
</html>