
  <!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Main Page | Analysis Suite  documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/theme.9297a650d9dd3016d913.css" />
    <link rel="stylesheet" href="_static/style.css" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="next" title="Basic running" href="running.html" />
  </head>

  <body class="antialiased text-gray scroll-smooth">
    <div
      id="page"
      data-controller="sidebar search "
      data-action="keydown@window->search#focus "
      class="min-h-screen xl:h-screen flex flex-col xl:grid xl:grid-layout print:block print:h-auto"
    >
      <a class="block transition -translate-x-full focus:translate-x-0 opacity-0 focus:opacity-100 text-xl bg-white p-4 z-20 absolute top-0 left-0 h-14" href="#main-page" title="Skip navigation links">Skip to content</a>

      <header class="grid-area-header z-10 h-14 fixed w-full top-0 print:hidden">
        <div class="bg-gray-dark shadow-md flex items-center h-full xl:px-2 relative"><div class="flex items-center">
      <button
    data-action="sidebar#open"
    data-sidebar-target="hamburger"
    class="xl:hidden h-14 w-14 leading-14 text-gray-100 hover:bg-gray-700 hover:text-brand focus:outline-none focus:bg-gray-700 focus:text-brand">
  <span class="sr-only">Open navigation menu</span>
  <svg aria-hidden="true" class="fill-current h-8 w-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</button><a class="hover:bg-gray-700 focus:bg-gray-700 focus:outline-none"
   href="#"
   title="Back to homepage"><span class="hidden lg:inline-block shrink-0 font-medium text-gray-100 mx-5 leading-14 tracking-wider">Analysis Suite  documentation</span>
</a></div><div class="flex justify-end items-center flex-1"><form
  id="searchbox"
  action="search.html"
  data-action="click->search#focusSearchInput"
  method="get"
  class="flex print:hidden justify-between items-center leading-14 md:ml-4 bg-gray-dark text-gray-300 focus-within:bg-gray-50 focus-within:text-gray-800 focus-within:absolute focus-within:inset-x-0 focus-within:top-0 md:focus-within:w-full md:focus-within:static z-10">

  <button
    class="text-inherit h-14 w-14"
    aria-label="Get search results"
    tabindex="-1"
  >
    <svg aria-hidden="true" class="fill-current stroke-current h-8 w-8" stroke-width="0.5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
  </button>

  <input
    name="q"
    id="search-input"
    data-search-target="searchInput"
    type="search"
    aria-label="Search the docs"
    placeholder="Search the docs"
    class="pr-2 bg-transparent text-inherit focus:outline-none w-0 md:w-auto focus:w-full transition-all duration-100"
  />
</form></div>
</div>
      </header>

      
<aside data-sidebar-target="sidebar" class="grid-area-sidebar h-full fixed pt-14 xl:relative inset-y-0 left-0 z-20 xl:z-0 print:hidden overflow-y-auto transition-all transform transform-gpu -translate-x-full opacity-0 duration-300 xl:translate-x-0 xl:opacity-100">
  <nav
  role="navigation"
  class="h-full overflow-y-auto bg-white text-gray-600 pt-8 flex flex-col"
>
  <div class="nav-toc flex-1 pl-6"><p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Main Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="running.html">Basic running</a><ul>
<li class="toctree-l2"><a class="reference internal" href="running.html#analysis-analyze">Analysis (<code class="docutils literal notranslate"><span class="pre">analyze</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="running.html#bdt-runner-mva">BDT runner (<code class="docutils literal notranslate"><span class="pre">mva</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="running.html#plotting-plot">Plotting (<code class="docutils literal notranslate"><span class="pre">plot</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="running.html#setup-combine-combine">Setup Combine (<code class="docutils literal notranslate"><span class="pre">combine</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="analysis_suite.html">Analysis Suite Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="analysis_suite.commons.html"><code class="docutils literal notranslate"><span class="pre">commons</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="analysis_suite.commons.html#commons-awkward-commons"><code class="docutils literal notranslate"><span class="pre">commons.awkward_commons</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_suite.commons.html#module-analysis_suite.commons.configs"><code class="docutils literal notranslate"><span class="pre">commons.configs</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_suite.commons.html#commons-histogram"><code class="docutils literal notranslate"><span class="pre">commons.histogram</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_suite.commons.html#module-analysis_suite.commons.info"><code class="docutils literal notranslate"><span class="pre">commons.info</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_suite.commons.html#commons-makesimplehtml"><code class="docutils literal notranslate"><span class="pre">commons.makeSimpleHtml</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="analysis_suite.BDT_utilities.html"><code class="docutils literal notranslate"><span class="pre">BDT_utilities</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="analysis_suite.BDT_utilities.html#bdt-utilities-mvaplotter"><code class="docutils literal notranslate"><span class="pre">BDT_utilities.MVAPlotter</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_suite.BDT_utilities.html#bdt-utilities-mvamaker"><code class="docutils literal notranslate"><span class="pre">BDT_utilities.MvaMaker</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="analysis_suite.Plotting.html"><code class="docutils literal notranslate"><span class="pre">Plotting</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="analysis_suite.Plotting.html#plotting-logfile"><code class="docutils literal notranslate"><span class="pre">Plotting.LogFile</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_suite.Plotting.html#plotting-confighelper"><code class="docutils literal notranslate"><span class="pre">Plotting.configHelper</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_suite.Plotting.html#plotting-pypad"><code class="docutils literal notranslate"><span class="pre">Plotting.pyPad</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="analysis_suite.Plotting.html#plotting-stack"><code class="docutils literal notranslate"><span class="pre">Plotting.stack</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

  <button
      data-action="sidebar#close"
      title="Close navigation menu"
      class="text-4xl text-gray-800 p-4 bottom-0 hover:text-brand xl:hidden focus:text-brand self-center">
    <span class="sr-only">Close navigation menu</span>
    <svg aria-hidden="true" class="fill-current stroke-current h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
  </button>
</nav>
</aside>

<main
  class="px-4 pt-14 xl:ml-fluid grid-area-main overflow-y-auto flex flex-col flex-1 h-full mx-0 md:mx-auto xl:mr-0"
><article role="main" class="flex-1">
    
  <section id="main-page">
<h1>Main Page<a class="headerlink" href="#main-page" title="Permalink to this heading">Â¶</a></h1>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Main Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="running.html">Basic running</a><ul>
<li class="toctree-l2"><a class="reference internal" href="running.html#analysis-analyze">Analysis (<code class="docutils literal notranslate"><span class="pre">analyze</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="running.html#bdt-runner-mva">BDT runner (<code class="docutils literal notranslate"><span class="pre">mva</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="running.html#plotting-plot">Plotting (<code class="docutils literal notranslate"><span class="pre">plot</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="running.html#setup-combine-combine">Setup Combine (<code class="docutils literal notranslate"><span class="pre">combine</span></code>)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="analysis_suite.html">Analysis Suite Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="analysis_suite.commons.html"><code class="docutils literal notranslate"><span class="pre">commons</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis_suite.BDT_utilities.html"><code class="docutils literal notranslate"><span class="pre">BDT_utilities</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis_suite.Plotting.html"><code class="docutils literal notranslate"><span class="pre">Plotting</span></code></a></li>
</ul>
</li>
</ul>
</div>
<section id="installation-guide">
<h2>Installation Guide<a class="headerlink" href="#installation-guide" title="Permalink to this heading">Â¶</a></h2>
<p>This area requires python3 for all python scripts as well as ROOT, so you need to be in a CMSSW area with ROOT 6.20 or greater. At time of writing, <code class="docutils literal notranslate"><span class="pre">CMSSW_11_2_0_pre9</span></code> fits the bill. You will also have to have certain packages not default for</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generic Area Setup</span>
cmsrel CMSSW_12_3_1
<span class="nb">cd</span> CMSSW_12_3_1/src
cmsenv
git clone https://github.com/dteague/Analysis_suite analysis_suite
<span class="nb">cd</span> analysis_suite

<span class="c1"># Setting up scale factors</span>
git submodule init
git submodule update
cp -r jsonpog-integration/POG data

<span class="c1"># Building</span>
python3 -m pip install --user -r requirements.txt
scram b -j <span class="m">4</span>
</pre></div>
</div>
<p><strong>Note</strong>: After you scram, the python will compile, but this is not needed, it is also compiled at run time. Scram just sets up the links, so scram is not needed whenever python code is changed after the first run. HOWEVER, scram is needed to compile the cpp code!</p>
</section>
<section id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this heading">Â¶</a></h2>
<p>There are two main scripts that can be run in the code:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">analyze.py</span></code> for skimming NanoAOD files and turning them in ntuples</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run_suite.py</span></code> for modifying and changing the ntuples</p></li>
</ul>
<p>For <code class="docutils literal notranslate"><span class="pre">analyze.py</span></code>, you must run on an xrootd accessed file or to run locally, add the <code class="docutils literal notranslate"><span class="pre">--local</span></code> flag. The analysis is the TSelector that one wants the the file to be run with. In hte help text, a list oof the choices are given for convience. A typical example of how the code is run is</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./analyze.py -a ThreeTop -v <span class="m">1</span> -i &lt;remote file&gt;
</pre></div>
</div>
<p>Which creates a file called <code class="docutils literal notranslate"><span class="pre">output.root</span></code>, or if one wants to run over a local file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./analyze.py -a ThreeTop -v <span class="m">1</span> -i &lt;<span class="nb">local</span> file&gt; --local -o outName.root
</pre></div>
</div>
<p>As for the <code class="docutils literal notranslate"><span class="pre">run_suite.py</span></code>, it takes the output ntuple created by <code class="docutils literal notranslate"><span class="pre">analyze.py</span></code> or the farmout jobs. The mode are</p>
<ul class="simple">
<li><p>flatten: Turn jagged ntuple into a rectilinear dataframe. Useful for machine learning</p></li>
<li><p>mva: Run the flatten ntuples through one of the many machine learning tools. Returns the same flattened ntuple with the discriminate added and the overall dataframe shortened for the test/train sets needed</p></li>
<li><p>plot: Plots both ntuples and flattened ntuples</p></li>
<li><p>combine: Take input file and creates histograms and cards to be used by combine</p></li>
</ul>
<p>A more detailed account of how each module works is given in the running section of this documentation along with a full analysis runthrough in the workflow section. An example of how this code works is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./run_suite.py &lt;mode&gt; -d &lt;Work Directory&gt; -y &lt;year&gt;
</pre></div>
</div>
<p>Or if you need more information, just run <code class="docutils literal notranslate"><span class="pre">./run_suite.py</span> <span class="pre">--help</span></code></p>
</section>
</section>


  </article>

  <footer>
    
      <div class="mt-20 mb-4 text-sm text-gray-700 print:mt-4">&copy; 2021, Dylan Teague&nbsp;Made with <a href="https://www.sphinx-doc.org">Sphinx 5.3.0</a></div>
    
  </footer></main>


      <button
  data-search-target="snackbar"
  data-action="search#hideSnackbar"
  class="fixed bottom-0 right-0 z-20 opacity-0 p-4 m-4 tracking-wide bg-gray-900 text-gray-100 transition transform transform-gpu duration-500 translate-y-full"
>
  Clear highlights
</button><div
  data-sidebar-target="screen"
  data-action="click->sidebar#close"
  class="fixed hidden inset-0 bg-black bg-opacity-50">
</div>
    </div>
    
      
<script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
<script src="_static/jquery.js"></script>
<script src="_static/underscore.js"></script>
<script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
<script src="_static/doctools.js"></script>
<script src="_static/sphinx_highlight.js"></script>
<script src="_static/theme.3051a0ec24cad00d4d88.js"></script>
    
  </body>
</html>